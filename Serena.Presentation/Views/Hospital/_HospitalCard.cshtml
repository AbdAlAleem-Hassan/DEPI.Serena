@model Serena.BLL.Models.Hospitals.HospitalDetailsDTO

@{
    var primaryAddress = Model.Addresses?.FirstOrDefault();
    // Placeholder image logic
  // var randomImageId = Model.Id % 5 + 1; // 1-5
}

<a asp-action="Details" asp-route-id="@Model.Id" class="hospital-card-link">
    <div class="hospital-card">

        <!-- ============================================= -->
        <!-- GRID VIEW CONTENT -->
        <!-- ============================================= -->
        <div class="hospital-card-header grid-only">
            <img src="@Model.ImageUrl" alt="@Model.Name Logo"
                 onerror="this.style.display='none'; this.parentElement.classList.add('placeholder'); this.parentElement.innerHTML='<i class=\'fas fa-hospital\'></i>'" />

        </div>

        <div class="hospital-card-body grid-only">
            <h3 class="hospital-name">@Model.Name</h3>

            @if (!string.IsNullOrEmpty(Model.Rank))
            {
                <div class="hospital-rank-badge">Rank: #@Model.Rank</div>
            }

            <div class="hospital-info">
                <div class="hospital-cost">
                    <i class="fas fa-dollar-sign"></i>
                    <span>@Model.AverageCost.ToString("N0")</span>
                    <span>per visit</span>
                </div>

                @if (!string.IsNullOrEmpty(Model.HospitalPhone))
                {
                    <div class="hospital-phone-row">
                        <i class="fas fa-phone-alt"></i>
                        <span>@Model.HospitalPhone</span>
                    </div>
                }

                @if (!string.IsNullOrEmpty(Model.EmergencyPhone))
                {
                    <div class="hospital-phone-row">
                        <i class="fas fa-ambulance"></i>
                        <span>@Model.EmergencyPhone</span>
                    </div>
                }
            </div>

            <!-- Grid Action Hint -->
            <div
                style="margin-top:auto; color: #3b82f6; font-weight:600; font-size:0.9rem; display:flex; align-items:center; gap:0.5rem;">
                View Details <i class="fas fa-arrow-right"></i>
            </div>
        </div>


        <!-- ============================================= -->
        <!-- LIST VIEW CONTENT (Table Cells) -->
        <!-- ============================================= -->

        <!-- Col 1: Identity -->
        <div class="list-cell identity-cell list-only">
            <div class="list-img-thumb"
                style="display:flex; align-items:center; justify-content:center; color:#94a3b8;">
                <i class="fas fa-hospital"></i>
            </div>
            <div>
                <h3 class="hospital-name" style="margin:0; font-size:1rem;">@Model.Name</h3>
                @if (primaryAddress != null)
                {
                    <span style="font-size:0.75rem; color:#64748B;">@primaryAddress.City</span>
                }
            </div>
        </div>

        <!-- Col 2: Rank -->
        <div class="list-cell list-only">
            @if (!string.IsNullOrEmpty(Model.Rank))
            {
                <span
                    style="background:#e0f2fe; color:#0284c7; padding:2px 8px; border-radius:4px; font-size:0.8rem; font-weight:600;">#@Model.Rank</span>
            }
            else
            {

                <span>-</span>
            }
        </div>

        <!-- Col 3: Cost -->
        <div class="list-cell list-only" style="font-weight:600; color:#059669;">
            $@Model.AverageCost.ToString("N0")
        </div>

        <!-- Col 4: Phone -->
        <div class="list-cell list-only">
            @if (!string.IsNullOrEmpty(Model.HospitalPhone))
            {
                <div style="display:flex; align-items:center; gap:6px;">
                    <i class="fas fa-phone" style="color:#64748B; font-size:0.8rem;"></i>
                    <span>@Model.HospitalPhone</span>
                </div>
            }
            else
            {

                <span>-</span>
            }
        </div>

        <!-- Col 5: Ambulance -->
        <div class="list-cell list-only">
            @if (!string.IsNullOrEmpty(Model.EmergencyPhone))
            {
                <div style="display:flex; align-items:center; gap:6px;">
                    <i class="fas fa-ambulance" style="color:#ef4444; font-size:0.8rem;"></i>
                    <span>@Model.EmergencyPhone</span>
                </div>
            }
            else
            {

                <span>-</span>
            }
        </div>

        <!-- Col 6: Actions -->
        <div class="list-cell actions-cell list-only">
            <span class="btn-primary-card" style="padding: 0.4rem 0.8rem; font-size: 0.75rem;">
                View
            </span>
        </div>

    </div>
</a>